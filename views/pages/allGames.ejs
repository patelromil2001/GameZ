<div class="catalogue-header">
  <h2>All Games</h2>
</div>

<!-- Grid of games -->
<div class="game-grid">
  <% games.forEach(game => { %>
    <div class="game-card">
      <a href="/games/game/<%= game._id %>">
        <img
          src="<%= game.header_image || '/assets/images/default_game.jpg' %>"
          alt="<%= game.name %>"
          class="game-img"
        />
        <h3><%= game.name %></h3>
        <p>$<%= game.price %></p>
      </a>
    </div>
  <% }) %>
</div>

<!-- Pagination -->
<div class="pagination">
  <!-- Previous -->
  <% if (pagination.hasPrev) { %>
    <a href="/games/all-games?page=<%= pagination.currentPage - 1 %>">
      Previous
    </a>
  <% } %>

  <!-- Show limited range instead of hundreds -->
  <% 
    const total = pagination.totalPages;
    const current = pagination.currentPage;
    const range = 2; // how many pages before and after current
    const start = Math.max(1, current - range);
    const end = Math.min(total, current + range);
  %>

  <% for (let i = start; i <= end; i++) { %>
    <% if (i === current) { %>
      <span class="active"><%= i %></span>
    <% } else { %>
      <a href="/games/all-games?page=<%= i %>"><%= i %></a>
    <% } %>
  <% } %>

  <!-- Next -->
  <% if (pagination.hasNext) { %>
    <a href="/games/all-games?page=<%= pagination.currentPage + 1 %>">
      Next
    </a>
  <% } %>
</div>
